#include "ros/ros.h"
#include "sensor_msgs/Image.h"

class SubPub
{
private:
  ros::NodeHandle n_;
  ros::Publisher pub_;
  ros::Subscriber sub_;

public:
  void callback(const sensor_msgs::Image &msg_sub);

  SubPub()
  {
    sub_ = n_.subscribe("/topic_sub", 1000, &SubPub::callback, this);
    pub_ = n_.advertise<sensor_msgs::Image>("/topic_pub", 1000);
  }
};

void SubPub::callback(const sensor_msgs::Image &msg_sub)
{
  sensor_msgs::Image msg_pub;

  // 処理

  pub_.publish(msg_pub);
}


int main(int argc, char *argv[])
{
  ros::init(argc, argv, "node_subpub");
  SubPub subpub;

  ros::spin();
}
